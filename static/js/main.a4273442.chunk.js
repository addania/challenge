(this.webpackJsonpchallenge=this.webpackJsonpchallenge||[]).push([[0],{155:function(e,t,a){e.exports=a(283)},160:function(e,t,a){},162:function(e,t,a){},281:function(e,t,a){},283:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(30),s=a.n(l),o=(a(160),a(16)),i=a(47),c=a(70),u=a.n(c),m=a(33),p=a(18),g=a.n(p),f=(a(162),a(50),a(290)),d=a(291),h=a(292);function v(){return r.a.createElement("div",null,r.a.createElement(f.a,null,r.a.createElement(d.a,{sm:12},r.a.createElement("h2",{style:{margin:"20px 0px",textAlign:"left",color:"#7F6A93",borderBottom:"0.5px solid #E8E8EA",paddingBottom:"20px"}},"Advertising Data ETL-V Challenge"))))}function E(e){return r.a.createElement("li",null,e.message,r.a.createElement("span",{style:e.styling},e.columns,"s"))}function y(e){for(var t={fontStyle:"italic"},a=[],n=0;n<e.dimensionsColumns.length;n++)a.push(r.a.createElement(E,{message:"Select zero to N ",columns:e.dimensionsColumns[n],styling:t,key:n}));return r.a.createElement("div",null,r.a.createElement(f.a,null,r.a.createElement(d.a,{sm:12},r.a.createElement("div",{style:{margin:"20px 0px",textAlign:"left",color:"#828282",fontSize:"15px",borderBottom:"0.5px solid #E8E8EA",paddingBottom:"20px"}},r.a.createElement("ul",{style:{paddingLeft:"20px"}},a),r.a.createElement("p",{style:{fontSize:"12px"}},'[where zero means "All"]'),r.a.createElement("p",null,'Hitting "Apply" filters the chart to show a timeseries for both'," ",r.a.createElement("span",{style:t},e.metricsColumns[0])," and"," ",r.a.createElement("span",{style:t},e.metricsColumns[1])," for given"," ",r.a.createElement("span",{style:t},e.dimensionsColumns[0],"s")," and"," ",r.a.createElement("span",{style:t},e.dimensionsColumns[1],"s")," - logical AND")))))}var b=a(31),C=a.n(b),x=a(130),O=a.n(x);function D(e){var t=e.coreData,a=e.filters,n=e.applyFilters,l=e.onClick,s=e.styling,o=function(e,t,a){var n,r,l,s="";if(a){var o=j(function(e,t){var a=e.Datasource,n=e.Campaign,r=[];0===Object.entries(e).length&&e.constructor===Object||void 0!==a&&0!==a.length?0===Object.entries(e).length&&e.constructor===Object||void 0!==n&&0!==n.length?0===Object.entries(e).length&&e.constructor===Object||(r=g.a.filter(t,(function(e){return a.includes(e.Datasource)&&n.includes(e.Campaign)}))):r=g.a.filter(t,(function(e){return a.includes(e.Datasource)})):r=g.a.filter(t,(function(e){return n.includes(e.Campaign)}));return r}(t,e));n=o[0],r=o[1],l=o[2],s=function(e){var t="",a="";if(void 0===e.Campaign&&void 0!==e.Datasource){a="All Campaigns";var n=k(e.Datasource);t="Datasource "+n}else if(void 0===e.Datasource&&void 0!==e.Campaign){t="All Datasources";var r=k(e.Campaign);a="Campaign "+r}else if(void 0===e.Campaign&&void 0===e.Datasource)t="All Datasources ",a="All Campaigns";else{var l=k(e.Datasource),s=k(e.Campaign);t="Datasource "+l,a="Campaign "+s}return t+"; "+a}(t)}else{var i=j(e);n=i[0],r=i[1],l=i[2],s="All Datasources; All Campaigns"}return c=n,u=r,m=l,p=s,{chart:{type:"spline"},xAxis:{categories:m},yAxis:[{labels:{format:"{value}",style:{color:C.a.getOptions().colors[0]}},title:{text:"Clicks",style:{color:C.a.getOptions().colors[0]}},opposite:!1},{gridLineWidth:0,title:{text:"Impressions",style:{color:C.a.getOptions().colors[1]}},labels:{format:"{value}",style:{color:C.a.getOptions().colors[1]}},opposite:!0}],title:{text:p,align:"left"},series:[{name:"Clicks",data:u},{name:"Impressions",yAxis:1,data:c}]};var c,u,m,p}(t,a,n);return r.a.createElement("div",null,r.a.createElement(f.a,null,r.a.createElement(d.a,{sm:10},r.a.createElement("h2",{style:s},"Chart")),r.a.createElement(d.a,{sm:2},r.a.createElement("button",{type:"submit",style:{backgroundColor:"#8DA1B9",color:"white",borderRadius:"2px",width:"80px",padding:"5px 0px",marginTop:"10px",position:"absolute",right:0,bottom:0}},r.a.createElement("span",{onClick:l},"Reset")))),r.a.createElement(O.a,{highcharts:C.a,options:o}))}function j(e){for(var t=g.a.groupBy(e,"Date"),a=g.a.keys(t),n=[],r=[],l=0;l<a.length;l++){for(var s=0,o=0,i=0;i<t[a[l]].length;i++)s+=t[a[l]][i].Impressions,o+=t[a[l]][i].Clicks;n.push(s),r.push(o)}return[n,r,a]}function k(e){for(var t="",a=0;a<e.length&&a<3;a++)t=t+JSON.stringify(e[a])+" and ";return e.length<=3?t.slice(0,-4):t.slice(0,-5)+", etc."}var A=a(293);function w(e){var t=e.styling,a=e.filterColumns,n=e.onChange,l=e.dataSet,s=[],i=document.createElement("link");i.rel="stylesheet",i.href="https://cdn.jsdelivr.net/npm/semantic-ui/dist/semantic.min.css",document.head.appendChild(i);for(var c=0;c<a.length;c++){var u=S(a[c],l);s.push(r.a.createElement("div",{key:c},r.a.createElement("p",{style:{textAlign:"left",color:"#828282",marginTop:"20px"}},a[c]),r.a.createElement(A.a,Object(o.a)({key:c,style:i,placeholder:a[c],fluid:!0,multiple:!0,selection:!0,options:u,onChange:n},"style",{marginTop:"5px"}))))}return r.a.createElement("div",null,r.a.createElement("h2",{style:t},"Filters"),s)}function S(e,t){for(var a=[],n=0;n<t.length;n++)a.includes(t[n][e])||a.push(t[n][e]);for(var r=[],l=0;l<a.length;l++){var s={key:a[l],text:a[l],value:a[l]};r.push(s)}return r}a(281);function B(e){var t=e.onClick;return r.a.createElement("button",{type:"submit",style:{backgroundColor:"#8DA1B9",color:"white",borderRadius:"2px",width:"80px",padding:"5px 0px",position:"left",marginTop:"10px"}},r.a.createElement("span",{onClick:t},"Apply"))}var F=a(282);var I=function(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],l=t[1],s=Object(n.useState)([]),c=Object(m.a)(s,2),p=c[0],g=c[1],E=Object(n.useState)([]),b=Object(m.a)(E,2),C=b[0],x=b[1],O=Object(n.useState)([]),j=Object(m.a)(O,2),k=(j[0],j[1]),A=Object(n.useState)({}),S=Object(m.a)(A,2),F=S[0],I=S[1],H=Object(n.useState)(!1),V=Object(m.a)(H,2),$=V[0],q=V[1];Object(n.useEffect)((function(){!function(){var e,t,a,n,r,s,o,i,c,m,p;u.a.async((function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,u.a.awrap(fetch("https://raw.githubusercontent.com/addania/challenge/master/src/data/source.csv?raw=true"));case 2:return e=f.sent,f.next=5,u.a.awrap(e.text());case 5:t=f.sent,a=M(t),n=N(a),r=T(n),s=z(r),o=Y(s[0]),i=J(s[0],o),c=L(s[0],o),m=R(s[0],o),p=W(s),l(p),g(i),x(c),k(m);case 19:case"end":return f.stop()}}))}()}),[]);var G={margin:"30px 0px",textAlign:"left",color:"#8DA1B9"};return r.a.createElement("div",{className:"App"},r.a.createElement(h.a,null,r.a.createElement(v,null),r.a.createElement(y,{dimensionsColumns:C,metricsColumns:p}),r.a.createElement(f.a,null,r.a.createElement(d.a,{sm:4,style:{backgroundColor:"#EFF2F1"}},r.a.createElement(w,{styling:G,filterColumns:C,onChange:function(e,t){if(q(!1),void 0===t.value||0===t.value){var a=Object(i.a)({},F);delete a[t.placeholder],I(a)}else{var n=Object(i.a)({},F),r=t.placeholder;n=Object.assign(n,Object(o.a)({},r,t.value)),I(n)}},dataSet:a}),r.a.createElement(B,{onClick:function(){if(0!==Object.entries(F).length||F.constructor!==Object){q(!0)}}})),r.a.createElement(d.a,{sm:8},r.a.createElement(D,{coreData:a,filters:F,applyFilters:$,onClick:function(){q(!1)},styling:G})))))};function M(e){for(var t=e.split("\n"),a=[],n=t[0].split(","),r=1;r<t.length;r++){for(var l={},s=t[r].split(","),o=0;o<n.length;o++){var i=s[o];l[n[o]]=3===o||4===o?parseInt(i):i}a.push(l)}a.pop();return a}function N(e){for(var t=0;t<e.length;t++)e[t].Impressions||(e[t].Impressions=0),e[t].Clicks||(e[t].Clicks=0);return e}function T(e){for(var t=[],a=0;a<e.length;a++){var n=Object(i.a)({},e[a]),r=e[a].Date,l=r.slice(6,10),s=r.slice(3,5),o=r.slice(0,2),c=new Date(l+"-"+s+"-"+o);n.Date=c,t.push(n)}return t}function z(e){return g.a.sortBy(e,["Date","Datasource","Campaign"])}function Y(e){return Object.keys(e)}function J(e,t){for(var a=[],n=0;n<t.length;n++){var r=t[n];g.a.isNumber(e[r])&&a.push(r)}return a}function L(e,t){for(var a=[],n=0;n<t.length;n++){var r=t[n];g.a.isString(e[r])&&a.push(r)}return a}function R(e,t){for(var a=[],n=0;n<t.length;n++){var r=t[n];g.a.isDate(e[r])&&a.push(r)}return a}function W(e){for(var t=[],a=0;a<e.length;a++){var n=Object(i.a)({},e[a]),r=e[a].Date,l=F(r,"DD.MM.YYYY").format("DD. MMM");n.Date=l,t.push(n)}return t}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[155,1,2]]]);
//# sourceMappingURL=main.a4273442.chunk.js.map