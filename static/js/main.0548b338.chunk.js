(this.webpackJsonpchallenge=this.webpackJsonpchallenge||[]).push([[0],{155:function(e,t,n){e.exports=n(282)},160:function(e,t,n){},162:function(e,t,n){},281:function(e,t,n){},282:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),r=n(31),o=n.n(r),s=(n(160),n(16)),c=n(68),i=n(69),u=n.n(i),m=n(21),p=(n(162),n(48),n(18)),g=n.n(p),d=n(289),f=n(290),h=n(291);function v(){return l.a.createElement("div",null,l.a.createElement(d.a,null,l.a.createElement(f.a,{sm:12},l.a.createElement("h2",{style:{margin:"20px 0px",textAlign:"left",color:"#7F6A93",borderBottom:"0.5px solid #E8E8EA",paddingBottom:"20px"}},"Advertising Data ETL-V Challenge"))))}function E(e){return l.a.createElement("li",null,e.message,l.a.createElement("span",{style:e.styling},e.columns,"s"))}function b(e){for(var t={fontStyle:"italic"},n=[],a=0;a<e.dimensionsColumns.length;a++)n.push(l.a.createElement(E,{message:"Select zero to N ",columns:e.dimensionsColumns[a],styling:t,key:a}));return l.a.createElement("div",null,l.a.createElement(d.a,null,l.a.createElement(f.a,{sm:12},l.a.createElement("div",{style:{margin:"20px 0px",textAlign:"left",color:"#828282",fontSize:"15px",borderBottom:"0.5px solid #E8E8EA",paddingBottom:"20px"}},l.a.createElement("ul",{style:{paddingLeft:"20px"}},n),l.a.createElement("p",{style:{fontSize:"12px"}},'[where zero means "All"]'),l.a.createElement("p",null,'Hitting "Apply" filters the chart to show a timeseries for both'," ",l.a.createElement("span",{style:t},e.metricsColumns[0])," and"," ",l.a.createElement("span",{style:t},e.metricsColumns[1])," for given"," ",l.a.createElement("span",{style:t},e.dimensionsColumns[0],"s")," and"," ",l.a.createElement("span",{style:t},e.dimensionsColumns[1],"s")," - logical AND")))))}var y=n(32),x=n.n(y),O=n(130),C=n.n(O);function j(e){var t,n=e.coreData,a=e.filters,r=e.applyFilters,o=e.onClick,c=e.styling,i=function(e,t,n){var a,l,r;if(n){var o=function(e,t){Object.values(e);var n=e.Datasource,a=e.Campaign,l=[];0===Object.entries(e).length&&e.constructor===Object||void 0!==n&&0!=n.length?0===Object.entries(e).length&&e.constructor===Object||void 0!==a&&0!=a.length?0===Object.entries(e).length&&e.constructor===Object||(l=g.a.filter(t,(function(e){return n.includes(e.Datasource)&&a.includes(e.Campaign)}))):l=g.a.filter(t,(function(e){return n.includes(e.Datasource)})):l=g.a.filter(t,(function(e){return a.includes(e.Campaign)}));return l}(t,e);console.log("arrayAfterFiltering",o);var s=k(o);console.log("aggregatedData",s),a=s[0],console.log("aggregatedImpressions",a),l=s[1],console.log("aggregatedClicks",l),r=s[2]}else{var c=k(e);console.log("aggregatedData",c),a=c[0],console.log("aggregatedImpressions",a),l=c[1],console.log("aggregatedClicks",l),r=c[2],console.log("aggregatedDates",r)}return i=a,u=l,m=r,{chart:{type:"spline"},xAxis:{categories:m},yAxis:[{labels:{format:"{value}",style:{color:x.a.getOptions().colors[0]}},title:{text:"Clicks",style:{color:x.a.getOptions().colors[0]}},opposite:!1},{gridLineWidth:0,title:{text:"Impressions",style:{color:x.a.getOptions().colors[1]}},labels:{format:"{value}",style:{color:x.a.getOptions().colors[1]}},opposite:!0}],title:{text:"Datasources",align:"left"},series:[{name:"Clicks",data:u},{name:"Impressions",yAxis:1,data:i}]};var i,u,m}(n,a,r);return l.a.createElement("div",null,l.a.createElement(d.a,null,l.a.createElement(f.a,{sm:10},l.a.createElement("h2",{style:c},"Chart")),l.a.createElement(f.a,{sm:2},l.a.createElement("button",{type:"submit",style:(t={backgroundColor:"#8DA1B9",color:"white",borderRadius:"2px",width:"80px",padding:"5px 0px",position:"left",marginTop:"10px"},Object(s.a)(t,"position","absolute"),Object(s.a)(t,"right",0),Object(s.a)(t,"bottom",0),t)},l.a.createElement("span",{onClick:o},"Reset")))),l.a.createElement(C.a,{highcharts:x.a,options:i}))}function k(e){console.log("array",e);var t=g.a.groupBy(e,"Date");console.log("groupByDate",t);for(var n=g.a.keys(t),a=[],l=[],r=0;r<n.length;r++){for(var o=0,s=0,c=0;c<t[n[r]].length;c++)o+=t[n[r]][c].Impressions,s+=t[n[r]][c].Clicks;console.log("totalImpressions",o),console.log("totalClicks",s),a.push(o),l.push(s)}return[a,l,n]}var D=n(292);function A(e){var t=e.styling,n=e.filterColumns,r=e.onChange,o=e.dataSet,c=Object(a.useState)(),i=Object(m.a)(c,2),u=(i[0],i[1],[]),p=document.createElement("link");p.rel="stylesheet",p.href="https://cdn.jsdelivr.net/npm/semantic-ui/dist/semantic.min.css",document.head.appendChild(p);for(var g=0;g<n.length;g++){var d=w(n[g],o);u.push(l.a.createElement("div",{key:g},l.a.createElement("p",{style:{textAlign:"left",color:"#828282",marginTop:"20px"}},n[g]),l.a.createElement(D.a,Object(s.a)({key:g,style:p,placeholder:n[g],fluid:!0,multiple:!0,selection:!0,options:d,onChange:r},"style",{marginTop:"5px"}))))}return l.a.createElement("div",null,l.a.createElement("h2",{style:t},"Filters"),u)}function w(e,t){for(var n=[],a=0;a<t.length;a++)n.includes(t[a][e])||n.push(t[a][e]);for(var l=[],r=0;r<n.length;r++){var o={key:n[r],text:n[r],value:n[r]};l.push(o)}return l}n(281);function B(e){var t=e.onClick;return l.a.createElement("button",{type:"submit",style:{backgroundColor:"#8DA1B9",color:"white",borderRadius:"2px",width:"80px",padding:"5px 0px",position:"left",marginTop:"10px"}},l.a.createElement("span",{onClick:t},"Apply"))}var S=function(){var e=Object(a.useState)([]),t=Object(m.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)([]),i=Object(m.a)(o,2),p=i[0],g=i[1],E=Object(a.useState)([]),y=Object(m.a)(E,2),x=y[0],O=y[1],C=Object(a.useState)([]),k=Object(m.a)(C,2),D=(k[0],k[1]),w=Object(a.useState)([]),S=Object(m.a)(w,2),J=(S[0],S[1],Object(a.useState)({})),H=Object(m.a)(J,2),K=H[0],M=H[1],V=Object(a.useState)(!1),Y=Object(m.a)(V,2),$=Y[0],q=Y[1];Object(a.useEffect)((function(){!function(){var e,t,n,a,l,o,s,c,i,m;u.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,u.a.awrap(fetch("http://adverity-challenge.s3-website-eu-west-1.amazonaws.com/DAMKBAoDBwoDBAkOBAYFCw.csv"));case 2:return e=p.sent,p.next=5,u.a.awrap(e.text());case 5:t=p.sent,n=I(t),a=F(n),l=z(a),o=T(l),s=N(o[0]),c=L(o[0],s),i=R(o[0],s),m=W(o[0],s),r(o),g(c),O(i),D(m);case 18:case"end":return p.stop()}}))}()}),[]);var G={margin:"30px 0px",textAlign:"left",color:"#8DA1B9"};return l.a.createElement("div",{className:"App"},l.a.createElement(h.a,null,l.a.createElement(v,null),l.a.createElement(b,{dimensionsColumns:x,metricsColumns:p}),l.a.createElement(d.a,null,l.a.createElement(f.a,{sm:4,style:{backgroundColor:"#EFF2F1"}},l.a.createElement(A,{styling:G,filterColumns:x,onChange:function(e,t){if(q(!1),void 0===t.value||0==t.value){var n=Object(c.a)({},K);delete n[t.placeholder],M(n)}else{var a=Object(c.a)({},K),l=t.placeholder;a=Object.assign(a,Object(s.a)({},l,t.value)),M(a)}},dataSet:n}),l.a.createElement(B,{onClick:function(){q(!0)}})),l.a.createElement(f.a,{sm:8},l.a.createElement(j,{coreData:n,filters:K,applyFilters:$,onClick:function(){q(!1)},styling:G})))))};function I(e){for(var t=e.split("\n"),n=[],a=t[0].split(","),l=1;l<t.length;l++){for(var r={},o=t[l].split(","),s=0;s<a.length;s++){var c=o[s];r[a[s]]=3==s||4==s?parseInt(c):c}n.push(r)}return n}function F(e){for(var t=0;t<e.length;t++)e[t].Impressions||(e[t].Impressions=0),e[t].Clicks||(e[t].Clicks=0);return e}function z(e){for(var t=[],n=0;n<e.length;n++){var a=Object(c.a)({},e[n]),l=e[n].Date,r=l.slice(6,10),o=l.slice(3,5),s=l.slice(0,2),i=new Date(r+"-"+o+"-"+s);a.Date=i,t.push(a)}return t}function T(e){return g.a.sortBy(e,["Date","Datasource"])}function N(e){return Object.keys(e)}function L(e,t){for(var n=[],a=0;a<t.length;a++){var l=t[a];g.a.isNumber(e[l])&&n.push(l)}return n}function R(e,t){for(var n=[],a=0;a<t.length;a++){var l=t[a];g.a.isString(e[l])&&n.push(l)}return n}function W(e,t){for(var n=[],a=0;a<t.length;a++){var l=t[a];g.a.isDate(e[l])&&n.push(l)}return n}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[155,1,2]]]);
//# sourceMappingURL=main.0548b338.chunk.js.map