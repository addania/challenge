(this.webpackJsonpchallenge=this.webpackJsonpchallenge||[]).push([[0],{155:function(e,t,n){e.exports=n(282)},160:function(e,t,n){},162:function(e,t,n){},281:function(e,t,n){},282:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),r=n(31),s=n.n(r),o=(n(160),n(17)),c=n(68),i=n(69),u=n.n(i),m=n(21),p=(n(162),n(48),n(13)),g=n.n(p),f=n(289),h=n(290),d=n(291);function v(){return l.a.createElement("div",null,l.a.createElement(f.a,null,l.a.createElement(h.a,{sm:12},l.a.createElement("h2",{style:{margin:"20px 0px",textAlign:"left",color:"#7F6A93",borderBottom:"0.5px solid #E8E8EA",paddingBottom:"20px"}},"Advertising Data ETL-V Challenge"))))}function y(e){return l.a.createElement("li",null,e.message,l.a.createElement("span",{style:e.styling},e.columns,"s"))}function E(e){for(var t={fontStyle:"italic"},n=[],a=0;a<e.dimensionsColumns.length;a++)n.push(l.a.createElement(y,{message:"Select zero to N ",columns:e.dimensionsColumns[a],styling:t,key:a}));return l.a.createElement("div",null,l.a.createElement(f.a,null,l.a.createElement(h.a,{sm:12},l.a.createElement("div",{style:{margin:"20px 0px",textAlign:"left",color:"#828282",fontSize:"15px",borderBottom:"0.5px solid #E8E8EA",paddingBottom:"20px"}},l.a.createElement("ul",{style:{paddingLeft:"20px"}},n),l.a.createElement("p",{style:{fontSize:"12px"}},'[where zero means "All"]'),l.a.createElement("p",null,'Hitting "Apply" filters the chart to show a timeseries for both'," ",l.a.createElement("span",{style:t},e.metricsColumns[0])," and"," ",l.a.createElement("span",{style:t},e.metricsColumns[1])," for given"," ",l.a.createElement("span",{style:t},e.dimensionsColumns[0],"s")," and"," ",l.a.createElement("span",{style:t},e.dimensionsColumns[1],"s")," - logical AND")))))}var b=n(32),x=n.n(b),C=n(130),O=n.n(C);function k(e){var t,n=e.coreData,a=e.filters,r=e.applyFilters,s=e.onClick,c=e.styling,i=function(e,t,n){console.log("filter",t);var a=Object.keys(t),l=Object.values(t);console.log("name",a,"value",l),".includes";var r=t.Datasource,s=t.Campaign,o=[];0===Object.entries(t).length&&t.constructor===Object||void 0!==r&&0!=r.length?0===Object.entries(t).length&&t.constructor===Object||void 0!==s&&0!=s.length?0===Object.entries(t).length&&t.constructor===Object||(o=g.a.filter(e,(function(e){return r.includes(e.Datasource)&&s.includes(e.Campaign)}))):o=g.a.filter(e,(function(e){return r.includes(e.Datasource)})):o=g.a.filter(e,(function(e){return s.includes(e.Campaign)}));console.log("filteredArray",o);var c=[],i=[];if(1==n){for(var u=g.a.groupBy(o,"Date"),m=g.a.keys(u),p=[],f=[],h=0;h<m.length;h++){for(var d=0,v=0,y=0;y<u[m[h]].length;y++){console.log("dayEntry",h,"uniqueDates2[dayEntry]",m[h]);for(var E=g.a.keys(t),b=[],C=0;C<E.length;C++)t[E[C]].includes(u[m[h]][y][E[C]])?b.push(!0):b.push(!1);b.includes(!1)||(d+=u[m[h]][y].Impressions,v+=u[m[h]][y].Clicks,console.log())}console.log("totalImpressions2",d),console.log("totalClicks2",v),p.push(d),f.push(v)}console.log("impressionsArray2",p),console.log("clicksArray2",f),c=p,i=f;var O=g.a.sum(p),k=g.a.sum(f);console.log("sumImpressions2",O),console.log("sumClicks2",k),console.log("finalImpressionsArray2",c),console.log("finalClicksArray2",i)}for(var j=g.a.groupBy(e,"Date"),A=g.a.keys(j),D=[],w=[],B=0;B<A.length;B++){for(var S=0,I=0,F=0;F<j[A[B]].length;F++)if(1==n){for(var z=g.a.keys(t),T=[],N=0;N<z.length;N++)t[z[N]].includes(j[A[B]][F][z[N]])?T.push(!0):T.push(!1);T.includes(!1)||(S+=j[A[B]][F].Impressions,I+=j[A[B]][F].Clicks)}else{S+=j[A[B]][F].Impressions,I+=j[A[B]][F].Clicks;for(var L=g.a.keys(t),R=0;R<t.length;R++)t[L[R]]}D.push(S),w.push(I)}g.a.groupBy(e,"Campaign"),g.a.groupBy(e,"Datasource");return{chart:{type:"spline"},xAxis:{categories:A},yAxis:[{labels:{format:"{value}",style:{color:x.a.getOptions().colors[0]}},title:{text:"Clicks",style:{color:x.a.getOptions().colors[0]}},opposite:!1},{gridLineWidth:0,title:{text:"Impressions",style:{color:x.a.getOptions().colors[1]}},labels:{format:"{value}",style:{color:x.a.getOptions().colors[1]}},opposite:!0}],title:{text:"Datasources",align:"left"},series:[{name:"Clicks",data:i},{name:"Impressions",yAxis:1,data:c}]}}(n,a,r);return l.a.createElement("div",null,l.a.createElement(f.a,null,l.a.createElement(h.a,{sm:10},l.a.createElement("h2",{style:c},"Chart")),l.a.createElement(h.a,{sm:2},l.a.createElement("button",{type:"submit",style:(t={backgroundColor:"#8DA1B9",color:"white",borderRadius:"2px",width:"80px",padding:"5px 0px",position:"left",marginTop:"10px"},Object(o.a)(t,"position","absolute"),Object(o.a)(t,"right",0),Object(o.a)(t,"bottom",0),t)},l.a.createElement("span",{onClick:s},"Reset")))),l.a.createElement(O.a,{highcharts:x.a,options:i}))}var j=n(292);function A(e){var t=e.styling,n=e.filterColumns,r=e.onChange,s=e.dataSet,c=Object(a.useState)(),i=Object(m.a)(c,2),u=(i[0],i[1],[]),p=document.createElement("link");p.rel="stylesheet",p.href="https://cdn.jsdelivr.net/npm/semantic-ui/dist/semantic.min.css",document.head.appendChild(p);for(var g=0;g<n.length;g++){var f=D(n[g],s);u.push(l.a.createElement("div",{key:g},l.a.createElement("p",{style:{textAlign:"left",color:"#828282",marginTop:"20px"}},n[g]),l.a.createElement(j.a,Object(o.a)({key:g,style:p,placeholder:n[g],fluid:!0,multiple:!0,selection:!0,options:f,onChange:r},"style",{marginTop:"5px"}))))}return l.a.createElement("div",null,l.a.createElement("h2",{style:t},"Filters"),u)}function D(e,t){for(var n=[],a=0;a<t.length;a++)n.includes(t[a][e])||n.push(t[a][e]);for(var l=[],r=0;r<n.length;r++){var s={key:n[r],text:n[r],value:n[r]};l.push(s)}return l}n(281);function w(e){var t=e.onClick;return l.a.createElement("button",{type:"submit",style:{backgroundColor:"#8DA1B9",color:"white",borderRadius:"2px",width:"80px",padding:"5px 0px",position:"left",marginTop:"10px"}},l.a.createElement("span",{onClick:t},"Apply"))}var B=function(){var e=Object(a.useState)([]),t=Object(m.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)([]),i=Object(m.a)(s,2),p=i[0],g=i[1],y=Object(a.useState)([]),b=Object(m.a)(y,2),x=b[0],C=b[1],O=Object(a.useState)([]),j=Object(m.a)(O,2),D=(j[0],j[1]),B=Object(a.useState)([]),W=Object(m.a)(B,2),J=(W[0],W[1],Object(a.useState)({})),q=Object(m.a)(J,2),H=q[0],K=q[1],M=Object(a.useState)(!1),V=Object(m.a)(M,2),Y=V[0],$=V[1];Object(a.useEffect)((function(){!function(){var e,t,n,a,l,s,o,c,i,m;u.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,u.a.awrap(fetch("http://adverity-challenge.s3-website-eu-west-1.amazonaws.com/DAMKBAoDBwoDBAkOBAYFCw.csv"));case 2:return e=p.sent,p.next=5,u.a.awrap(e.text());case 5:t=p.sent,n=S(t),a=I(n),l=F(a),s=z(l),o=T(s[0]),c=N(s[0],o),i=L(s[0],o),m=R(s[0],o),r(s),g(c),C(i),D(m);case 18:case"end":return p.stop()}}))}()}),[]);var G={margin:"30px 0px",textAlign:"left",color:"#8DA1B9"};return l.a.createElement("div",{className:"App"},l.a.createElement(d.a,null,l.a.createElement(v,null),l.a.createElement(E,{dimensionsColumns:x,metricsColumns:p}),l.a.createElement(f.a,null,l.a.createElement(h.a,{sm:4,style:{backgroundColor:"#EFF2F1"}},l.a.createElement(A,{styling:G,filterColumns:x,onChange:function(e,t){if($(!1),void 0===t.value||0==t.value){var n=Object(c.a)({},H);delete n[t.placeholder],K(n)}else{var a=Object(c.a)({},H),l=t.placeholder;a=Object.assign(a,Object(o.a)({},l,t.value)),K(a)}},dataSet:n}),l.a.createElement(w,{onClick:function(){$(!0)}})),l.a.createElement(h.a,{sm:8},l.a.createElement(k,{coreData:n,filters:H,applyFilters:Y,onClick:function(){$(!1)},styling:G})))))};function S(e){for(var t=e.split("\n"),n=[],a=t[0].split(","),l=1;l<t.length;l++){for(var r={},s=t[l].split(","),o=0;o<a.length;o++){var c=s[o];r[a[o]]=3==o||4==o?parseInt(c):c}n.push(r)}return n}function I(e){for(var t=0;t<e.length;t++)e[t].Impressions||(e[t].Impressions=0),e[t].Clicks||(e[t].Clicks=0);return e}function F(e){for(var t=[],n=0;n<e.length;n++){var a=Object(c.a)({},e[n]),l=e[n].Date,r=l.slice(6,10),s=l.slice(3,5),o=l.slice(0,2),i=new Date(r+"-"+s+"-"+o);a.Date=i,t.push(a)}return t}function z(e){return g.a.sortBy(e,["Date","Datasource"])}function T(e){return Object.keys(e)}function N(e,t){for(var n=[],a=0;a<t.length;a++){var l=t[a];g.a.isNumber(e[l])&&n.push(l)}return n}function L(e,t){for(var n=[],a=0;a<t.length;a++){var l=t[a];g.a.isString(e[l])&&n.push(l)}return n}function R(e,t){for(var n=[],a=0;a<t.length;a++){var l=t[a];g.a.isDate(e[l])&&n.push(l)}return n}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(l.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[155,1,2]]]);
//# sourceMappingURL=main.ad35aa08.chunk.js.map