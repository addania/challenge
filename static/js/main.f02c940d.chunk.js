(this.webpackJsonpchallenge=this.webpackJsonpchallenge||[]).push([[0],{158:function(e,t,n){e.exports=n(285)},163:function(e,t,n){},165:function(e,t,n){},284:function(e,t,n){},285:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(31),l=n.n(i),s=(n(163),n(68)),c=n.n(s),o=n(33),u=(n(165),n(47),n(294)),p=n(292),m=n(293),d=function(){return a.createElement("div",null,a.createElement(p.a,null,a.createElement(m.a,{sm:12},a.createElement("h2",{"data-testid":"header",style:{margin:"20px 0px",textAlign:"left",color:"#7F6A93",borderBottom:"0.5px solid #E8E8EA",paddingBottom:"20px"}},"Advertising Data ETL-V Challenge"))))},f=function(e){var t=e.message,n=e.columns,r=e.styling;return(a.createElement("li",{"data-testid":"list"},t,a.createElement("span",{style:r},n,"s")))},g=function(e){var t=e.dimensions,n=e.italicsInput;return t.map((function(e){return a.createElement(f,{"data-testid":"test",message:"Select zero to N ",columns:e,styling:n,key:e})}))},y=function(e){var t=e.dimensionsColumns,n=e.metricsColumns,r={fontStyle:"italic"};return a.createElement("div",null,a.createElement(p.a,null,a.createElement(m.a,{sm:12},a.createElement("div",{"data-testid":"subheader",style:{margin:"20px 0px",textAlign:"left",color:"#828282",fontSize:"15px",borderBottom:"0.5px solid #E8E8EA",paddingBottom:"20px"}},a.createElement("ul",{style:{paddingLeft:"20px"}},a.createElement(g,{dimensions:t,italicsInput:r})),a.createElement("p",{style:{fontSize:"12px"}},'[where zero means "All"]'),a.createElement("p",null,'Hitting "Apply" filters the chart to show a timeseries for both'," ",a.createElement("span",{style:r},n[0])," and"," ",a.createElement("span",{style:r},n[1])," for given"," ",a.createElement("span",{style:r},t[0],"s")," and"," ",a.createElement("span",{style:r},t[1],"s")," - logical AND")))))},E=n(26),h=n.n(E),v=n(131),b=n.n(v),x=n(65),A=n.n(x),O=function(e,t){if(0!==Object.entries(e).length||e.constructor!==Object)return void 0===e.datasource||0===e.datasource.length?t.filter((function(t){return e.campaign.includes(t.campaign)})):void 0===e.campaign||0===e.campaign.length?t.filter((function(t){return e.datasource.includes(t.datasource)})):t.filter((function(t){return e.datasource.includes(t.datasource)&&e.campaign.includes(t.campaign)}))},k=function(e){var t=A.a.groupBy(e,"date");return{impressions:{type:"line",name:"Impressions",yAxis:1,data:C(t,"impressions")},clicks:{type:"line",name:"Clicks",data:C(t,"clicks")}}},C=function(e,t){return Object.keys(e).map((function(n){var a=e[n].reduce((function(e,n){return e+n[t]}),0);return[parseInt(n),a]}))},j=function(e){return void 0===e.campaign&&void 0!==e.datasource?"Datasource "+w(e.datasource)+"; All Campaigns":void 0===e.datasource&&void 0!==e.campaign?"All Datasources; Campaign "+w(e.campaign):void 0===e.campaign&&void 0===e.datasource?"All Datasources; All Campaigns":"Datasource "+w(e.datasource)+"; Campaign "+w(e.campaign)},w=function(e){var t=e.slice(0,3).map((function(e){return JSON.stringify(e)+" and "}));return e.length<=3?t.join("").slice(0,-4):t.join("").slice(0,-5)+", etc."},D=function(e,t,n){return{chart:{type:"spline",zoomType:"x"},title:{text:n,align:"left"},xAxis:{type:"datetime",dateTimeLabelFormats:{day:"%e. %b"}},yAxis:[{labels:{format:"{value}",style:{color:h.a.getOptions().colors[0]}},title:{text:"Clicks",style:{color:h.a.getOptions().colors[0]}},opposite:!1},{gridLineWidth:0,title:{text:"Impressions",style:{color:h.a.getOptions().colors[1]}},labels:{format:"{value}",style:{color:h.a.getOptions().colors[1]}},opposite:!0}],legend:{enabled:!0},series:[t,e]}},B=function(e){var t,n,r,i=e.coreData,l=e.filters,s=e.applyFilters,c=e.styling;return(a.createElement("div",{"data-testid":"chart"},a.createElement(p.a,null,a.createElement(m.a,{sm:12},a.createElement("h2",{style:c},"Chart"))),a.createElement(b.a,{highcharts:h.a,options:(t=i,n=l,r=s,r?D(k(O(n,t)).impressions,k(O(n,t)).clicks,j(n)):D(k(t).impressions,k(t).clicks,"All Datasources; All Campaigns"))})))},S=n(148),F=n(295),I=function(e){var t=e.styling,n=e.filterColumns,r=e.onChange,i=e.dataSet;return(a.createElement("div",{"data-testid":"filter"},a.createElement("h2",{style:t},"Filters"),n.map((function(e){return a.createElement("div",{key:e},a.createElement("p",{style:{textAlign:"left",color:"#828282",marginTop:"20px"}},e),a.createElement(F.a,{key:e,placeholder:e,fluid:!0,multiple:!0,selection:!0,options:z(e,i),onChange:r,style:{marginTop:"5px"}}))}))))},z=function(e,t){return Object(S.a)(new Set(t.map((function(t){return t[e]})))).map((function(e){return{key:e,text:e,value:e}}))},T=(n(284),function(e){var t=e.onClick;return(a.createElement("button",{"data-testid":"button",type:"submit",style:{backgroundColor:"#8DA1B9",color:"white",borderRadius:"2px",width:"80px",padding:"5px 0px",position:"left",marginTop:"10px"}},a.createElement("span",{onClick:t},"Apply")))}),L=n(43),N=function(e){var t=R(W(J(V(e))));return{sortedData:t,metrics:K(t[0],H(t[0])),dimensions:M(t[0],H(t[0]))}},V=function(e){var t=e.split("\n").map((function(e){return{date:e.split(",")[0],datasource:e.split(",")[1],campaign:e.split(",")[2],clicks:parseInt(e.split(",")[3]),impressions:parseInt(e.split(",")[4])}}));return t.slice(1,t.length-1)},J=function(e){return e.map((function(e){return e.impressions||(e.impressions=0),e.clicks||(e.clicks=0),e}))},W=function(e){return e.map((function(e){var t=Object(L.a)({},e);return t.date=Date.parse(e.date.slice(6,10)+"-"+e.date.slice(3,5)+"-"+e.date.slice(0,2)),t}))},R=function(e){return A.a.sortBy(e,["date","datasource","campaign"])},H=function(e){return Object.keys(e)},K=function(e,t){return t.filter((function(t){return"number"===typeof e[t]&&"date"!==t}))},M=function(e,t){return t.filter((function(t){return"string"===typeof e[t]}))},Y=n(17),$=n(95),q=function(e){return 0!==Object.entries(e).length||e.constructor!==Object?{applyFilter:!0,filterValue:e}:{applyFilter:!1,filterValue:0}},G=function(){var e=a.useState([]),t=Object(o.a)(e,2),n=t[0],r=t[1],i=a.useState([]),l=Object(o.a)(i,2),s=l[0],f=l[1],g=a.useState([]),E=Object(o.a)(g,2),h=E[0],v=E[1],b=a.useState({}),x=Object(o.a)(b,2),A=x[0],O=x[1],k=a.useState(!1),C=Object(o.a)(k,2),j=C[0],w=C[1],D=a.useState(0),S=Object(o.a)(D,2),F=S[0],z=S[1];a.useEffect((function(){!function(){var e,t;c.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.a.awrap(fetch("http://adverity-challenge.s3-website-eu-west-1.amazonaws.com/DAMKBAoDBwoDBAkOBAYFCw.csv"));case 2:return e=n.sent,n.t0=N,n.next=6,c.a.awrap(e.text());case 6:n.t1=n.sent,t=(0,n.t0)(n.t1),r(t.sortedData),f(t.metrics),v(t.dimensions);case 11:case"end":return n.stop()}}))}()}),[]);var V={margin:"30px 0px",textAlign:"left",color:"#8DA1B9"};return a.createElement("div",{className:"App","data-testid":"app"},a.createElement(u.a,null,a.createElement(d,null),a.createElement(y,{dimensionsColumns:h,metricsColumns:s}),a.createElement(p.a,{style:{paddingLeft:"15px",paddingRight:"15px"}},a.createElement(m.a,{sm:4,style:{backgroundColor:"#EFF2F1"}},a.createElement(I,{styling:V,filterColumns:h,onChange:function(e,t){O(function(e,t,n){if(void 0!==t.value&&0!==t.value.length)return Object.assign(Object(L.a)({},n),Object(Y.a)({},t.placeholder,t.value));if("campaign"===t.placeholder){var a=Object(L.a)({},n);a.campaign;return Object($.a)(a,["campaign"])}if("datasource"===t.placeholder){var r=Object(L.a)({},n);r.datasource;return Object($.a)(r,["datasource"])}}(0,t,A))},dataSet:n}),a.createElement(T,{onClick:function(){w(q(A).applyFilter),z(q(A).filterValue)}})),a.createElement(m.a,{sm:8},a.createElement(B,{coreData:n,filters:F,applyFilters:j,styling:V})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(G,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[158,1,2]]]);
//# sourceMappingURL=main.f02c940d.chunk.js.map